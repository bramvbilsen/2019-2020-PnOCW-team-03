<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Team 3</title>
    <meta name="description" content="Screen casting app" />
  </head>

  <body id="page" style="height: 100vh">
    <video id="player" controls autoplay></video>
    <button id="capture">Capture</button>
    <button id="download">Dowload</button>
    <canvas id="canvas" width=320 height=240></canvas>

    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/socket.io-client@2/dist/socket.io.js"
    ></script>
    <script src="../index.js"></script>
    <script src="../scripts/frontTest.js">
      // console.log(__dirname);
      console.log("ok");
    </script>
    <script src="../scripts/backgroundColor.js"></script>
    <script
      type="text/javascript"
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"
    >
                $('#picture').change(function(){
      	          displayImg(this);
                });
                function displayImg(input){
      	        if (input.files && input.files[0]) {
                  var reader = new FileReader();
      		    var path = $(input).attr('src');


      		    //input.after(img);
      		    reader.onload = function(b){
      			    //$('#picture-src').attr('src' , b.target.result);
                      $('#picture-src').src = path;
      		    };
      		    reader.readAsDataURL(input.files[0]);
      	      }
      }
    </script>
  <script
  type="text/javascript"
  >
    const player = document.getElementById('player');
    const canvas = document.getElementById('canvas');
    const context = canvas.getContext('2d');
    const captureButton = document.getElementById('capture');
    const downloadButton = document.getElementById('download');
    var link;

    const constraints = {
      video: true,
    };

    captureButton.addEventListener('click', () => {
      // Draw the video frame to the canvas.
      // First num par gives us the width starting point from the canvas
      // Second num par gives us the height starting point from the canvas
      context.drawImage(player, 0, 0, canvas.width, canvas.height);
      //const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
    });

    downloadButton.addEventListener('click', () => {
      canvas.toBlob(function(blob) {
        // blob ready, download it
        link = document.createElement('a');
        //console.log(link);
        link.download = 'example.png';

        link.href = URL.createObjectURL(blob);
        link.click();
        // delete the internal blob reference, to let the browser clear memory from it
        //URL.revokeObjectURL(link.href);
          }, 'image/png');;
    });

    // Attach the video stream to the video element and autoplay.
    navigator.mediaDevices.getUserMedia(constraints)
      .then((stream) => {
        player.srcObject = stream;
      });


    </script>
    <!-- <h1>Nice - It works!</h1> -->
    <!---<input type='file' onchange="readURL(this);" />
          <img id="Id" src="#" alt="uw afbeelding" />
    Upload your image to process here. <input type="file" id="picture" />
    <img src="#" id="picture-src" />
    <div
      id="Change-Color-Button" 
      onclick="changeBackground('rgb(81, 31, 80)')"
      style="cursor: pointer"
    >
      Change background color
    </div>-->
    
  </body>
</html>
