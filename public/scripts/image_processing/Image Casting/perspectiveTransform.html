<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<title>transfromToBoundingBox</title>
</head>
<body>
<!-- <img id="img" src="test.png" alt="test" height="200" width="200"> -->
<canvas id="canvas" width="200" height="200"></canvas>
<h2>perspectiveTransform</h2>

<script src="opencv.js" type="text/javascript"></script>
<script type="text/javascript">
  

    window.transform = function tranform(canvas, srcPoints, dstPoints) {
        //let canvas2 = document.getElementById("canvas");
        let src = cv.imread(canvas);
        let dst = new cv.Mat();
        let dsize = new cv.Size(src.rows, src.cols);
        //let srcTri = cv.matFromArray(4, 1, cv.CV_32FC2, [srcPoints[0].x, srcPoints[0].y, srcPoints[1].x, srcPoints[2].y, srcPoints[2].x, srcPoints[2].y,srcPoints[3].x, srcPoints[3].y]);
        //let dstTri = cv.matFromArray(4, 1, cv.CV_32FC2, [dstPoints[0].x, dstPoints[0].y, dstPoints[1].x, dstPoints[2].y, dstPoints[2].x, dstPoints[2].y,dstPoints[3].x, dstPoints[3].y]);
        let srcTri = cv.matFromArray(4, 1, cv.CV_32FC2, [srcPoints[0], srcPoints[1], srcPoints[2], srcPoints[3], srcPoints[4], srcPoints[5],srcPoints[6], srcPoints[7]]);
        let dstTri = cv.matFromArray(4, 1, cv.CV_32FC2, [dstPoints[0], dstPoints[1], dstPoints[2], dstPoints[3], dstPoints[4], dstPoints[5],dstPoints[6], dstPoints[7]]);
        let M = cv.getPerspectiveTransform(srcTri, dstTri);
        cv.warpPerspective(src, dst, M, dsize, cv.INTER_LINEAR, cv.BORDER_CONSTANT, new cv.Scalar());
        var outputcanvas = createCanvas(200, 200);
        cv.imshow(canvas, dst);
        src.delete(); dst.delete(); M.delete(); srcTri.delete(); dstTri.delete();
    }

 

</script>
<script src="perspectiveTransform.js" type="text/javascript"></script>
</body>
</html>